<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Desintoxicación Digital PRO — E-book + Diagnóstico + Plan Personal</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<!-- Chart.js para gráfico -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
:root{
  --bg:#0f172a; --card:#111827; --muted:#94a3b8; --text:#e5e7eb; --brand:#22d3ee; --brand2:#818cf8;
  --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444; --chip:#1f2937; --stroke:#1f2937;
}
*{box-sizing:border-box}
html,body{margin:0;background:#0b1220;color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif}
a{color:var(--brand)}
.container{max-width:1100px;margin:auto;padding:24px}
.hero{border:1px solid #1f2536;border-radius:18px;padding:36px;background:
 radial-gradient(800px 320px at -10% -10%, rgba(34,211,238,.12), transparent 60%),
 radial-gradient(700px 320px at 110% 0%, rgba(129,140,248,.10), transparent 60%),
 linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
}
.badge{display:inline-flex;gap:8px;align-items:center;background:#0b1220;border:1px solid #1f2536;border-radius:999px;padding:6px 12px;color:var(--muted);font-weight:600;font-size:12px}
.h1{font-size:34px;line-height:1.12;margin:12px 0 8px;font-weight:800}
.txt-gradient{background:linear-gradient(90deg,var(--brand),var(--brand2));-webkit-background-clip:text;background-clip:text;color:transparent}
.sub{color:#cbd5e1;max-width:820px}
.btn{display:inline-flex;align-items:center;gap:10px;background:linear-gradient(90deg,var(--brand),var(--brand2));color:#0b1020;border:0;padding:12px 18px;border-radius:12px;font-weight:800;cursor:pointer;box-shadow:0 10px 30px rgba(34,211,238,.15);transition:.2s;text-decoration:none}
.btn:hover{transform:translateY(-1px)}
.btn.alt{background:#0b1220;border:1px solid #1f2536;color:#e5e7eb;box-shadow:none}
.grid{display:grid;gap:18px}
@media(min-width:900px){.grid.cols-2{grid-template-columns:1fr 1fr}}
.card{background:#0b1220;border:1px solid #1f2536;border-radius:16px;padding:18px}
.h2{font-size:20px;font-weight:800;margin:4px 0 12px}
.label{font-size:12px;color:var(--muted);font-weight:600;margin-bottom:8px;display:block}
.input,select,textarea{width:100%;background:#0a0f1d;border:1px solid #1f2536;color:var(--text);padding:12px;border-radius:10px;font-size:14px}
.kpi{display:flex;gap:14px;align-items:center;background:#0a0f1c;border:1px dashed #1f2536;padding:10px 12px;border-radius:12px}
.kpi b{font-size:22px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.chip{background:var(--chip);color:#cbd5e1;border:1px solid var(--stroke);padding:8px 10px;border-radius:999px;font-size:12px;cursor:pointer}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid #1f2536;padding:10px;text-align:left}
.table th{color:#93a3b8;font-weight:600;font-size:12px;letter-spacing:.02em}
.tag{padding:2px 8px;border-radius:999px;font-size:12px;font-weight:700}
.tag.ok{background:#052814;color:#86efac;border:1px solid #14532d}
.tag.warn{background:#2a1a00;color:#fde68a;border:1px solid #92400e}
.tag.bad{background:#2a0a0a;color:#fecaca;border:1px solid #7f1d1d}
.hr{height:1px;background:#1f2536;margin:14px 0}
.small{font-size:12px;color:#93a3b8}
.banner{display:flex;gap:12px;align-items:center;background:rgba(2,6,23,.6);border:1px solid #1f2536;padding:10px 12px;border-radius:12px}
.progress{height:10px;background:#0b1220;border:1px solid #1f2536;border-radius:999px;overflow:hidden}
.progress>span{display:block;height:100%;background:linear-gradient(90deg,#22c55e,#a3e635)}
.hidden{display:none}
</style>
</head>
<body>
  <!-- Top bar -->
  <header class="container">
    <div class="banner">
      <span class="chip">SEPTELLIST</span>
      <div style="flex:1">E-book <b>gratuito</b> → Web <b>PRO</b> que resuelve la intoxicación digital (diagnóstico, plan, niños).</div>
    </div>
  </header>

  <!-- Hero -->
  <section class="container hero">
    <span class="badge">📱 Desintoxicación Digital — Método 7 días</span>
    <h1 class="h1">Recuperá tu enfoque. <span class="txt-gradient">La web hace el resto.</span></h1>
    <p class="sub">Entregá primero el <b>e-book gratis</b>. Después, esta app genera un <b>plan personalizado</b>, bloqueos por horario, exportación <b>.ics</b>, <b>temporizador</b>, gráficos y <b>Modo Familia</b>.</p>
    <div class="row" style="margin-top:16px">
      <a class="btn" href="#app">🚀 Entrar a la app</a>
      <button class="btn alt" onclick="window.print()">🖨️ Descargar PDF</button>
    </div>
  </section>

  <!-- APP -->
  <main id="app" class="container grid cols-2">
    <!-- Columna A -->
    <section class="card">
      <div class="h2">1) Diagnóstico rápido</div>
      <label class="label">¿Con qué frecuencia ocurre…? (0=nunca / 5=siempre)</label>
      <div class="grid">
        <div>
          <span class="small">Revisás el teléfono apenas despertás</span>
          <input type="range" min="0" max="5" value="3" class="input q" data-weight="1.2">
        </div>
        <div>
          <span class="small">Notificaciones interrumpen el trabajo</span>
          <input type="range" min="0" max="5" value="4" class="input q" data-weight="1.4">
        </div>
        <div>
          <span class="small">Doomscroll nocturno (&gt;20 min)</span>
          <input type="range" min="0" max="5" value="3" class="input q" data-weight="1.3">
        </div>
        <div>
          <span class="small">Usás el móvil por aburrimiento/ansiedad</span>
          <input type="range" min="0" max="5" value="3" class="input q" data-weight="1.1">
        </div>
      </div>
      <div class="hr"></div>
      <div class="row kpi">
        <div>Índice de intoxicación:</div>
        <b id="score">–</b>
        <span id="scoreTag" class="tag">–</span>
      </div>
      <div class="progress" style="margin-top:8px"><span id="scoreBar" style="width:0%"></span></div>
      <div class="small" style="margin-top:6px">Meta: bajar el índice <b>30–50%</b> en 2 semanas.</div>
    </section>

    <section class="card">
      <div class="h2">2) Triggers y objetivos</div>
      <label class="label">Seleccioná tus disparadores</label>
      <div class="row" id="triggers">
        <button class="chip" data-v="mañana">🌅 Mañana</button>
        <button class="chip" data-v="tarde">🌤️ Tarde</button>
        <button class="chip" data-v="noche">🌙 Noche</button>
        <button class="chip" data-v="notifs">🔔 Notificaciones</button>
        <button class="chip" data-v="aburrimiento">😐 Aburrimiento</button>
        <button class="chip" data-v="ansiedad">😵‍💫 Ansiedad</button>
      </div>
      <div class="hr"></div>
      <label class="label">Objetivo semanal</label>
      <div class="grid cols-2">
        <div>
          <span class="small">Reducir tiempo total (%)</span>
          <input id="goalReduce" class="input" type="number" min="10" max="80" value="30">
        </div>
        <div>
          <span class="small">Ventana sin pantallas (h/día)</span>
          <input id="goalOffline" class="input" type="number" min="1" max="8" value="2">
        </div>
      </div>
      <div class="row" style="margin-top:10px">
        <button class="btn alt" id="saveProfile">💾 Guardar preferencias</button>
      </div>
    </section>

    <!-- Columna B (apps) -->
    <section class="card" style="grid-column:1/-1">
      <div class="h2">3) Cargá tus apps más consumidas</div>
      <div class="small">Ingresá 3–8 apps y minutos/día. El motor genera bloqueos, reemplazos y horarios.</div>
      <div class="row" style="margin:10px 0">
        <button class="chip preset">Instagram</button>
        <button class="chip preset">TikTok</button>
        <button class="chip preset">YouTube</button>
        <button class="chip preset">WhatsApp</button>
        <button class="chip preset">Facebook</button>
        <button class="chip preset">X (Twitter)</button>
        <button class="chip preset">Noticias</button>
        <button class="chip preset">Juegos</button>
      </div>
      <div class="grid">
        <table class="table" id="appsTable">
          <thead>
            <tr><th>App</th><th style="width:180px">Categoría</th><th style="width:140px">Min/día</th><th style="width:60px"></th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <div class="row">
          <input id="newApp" class="input" placeholder="Nombre de app">
          <button class="btn alt" id="addApp">➕ Agregar</button>
        </div>
      </div>
      <div class="hr"></div>
      <div class="row kpi">
        <div>Total minutos/día:</div><b id="totalMins">0</b>
        <span id="riskTag" class="tag">–</span>
      </div>
      <div class="row" style="margin-top:10px">
        <button class="btn" id="genPlan">⚡ Generar recomendaciones</button>
        <button class="btn alt" id="clearAll">🗑️ Limpiar</button>
      </div>
    </section>

    <!-- Recomendaciones -->
    <section class="card">
      <div class="h2">4) Recomendaciones personalizadas</div>
      <div id="recs" class="grid"></div>
    </section>

    <!-- Plan + export -->
    <section class="card">
      <div class="h2">5) Plan semanal & exportación</div>
      <div id="plan" class="grid"></div>
      <div class="row" style="margin-top:10px">
        <button class="btn alt" id="printPlan">🖨️ Imprimir/Guardar PDF</button>
        <button class="btn" id="exportIcs">📆 Exportar .ics</button>
      </div>
      <div class="small">Tip: cargá el .ics en Google Calendar / iCloud / Outlook.</div>
    </section>

    <!-- Temporizador + gráfico -->
    <section class="card">
      <div class="h2">6) Temporizador Deep Work</div>
      <div class="row" style="align-items:center">
        <div>
          <label class="label">Trabajo (min)</label>
          <input id="pomoWork" class="input" type="number" min="10" max="90" value="25">
        </div>
        <div>
          <label class="label">Descanso (min)</label>
          <input id="pomoBreak" class="input" type="number" min="3" max="30" value="5">
        </div>
        <div>
          <label class="label">Ciclos</label>
          <input id="pomoCycles" class="input" type="number" min="1" max="8" value="4">
        </div>
      </div>
      <div class="row" style="margin-top:10px">
        <button class="btn" id="pomoStart">▶️ Iniciar</button>
        <button class="btn alt" id="pomoStop">⏹️ Detener</button>
      </div>
      <div class="kpi" style="margin-top:10px"><div id="pomoStatus">Listo.</div></div>
      <div class="hr"></div>
      <div class="h2">📈 Progreso (últimos 7 días)</div>
      <canvas id="trend" width="600" height="180" aria-label="Gráfico de minutos totales"></canvas>
    </section>
  </main>

<script>
/* ====== Estado ====== */
const S = {
  apps: [], // {name, cat, mins}
  triggers: new Set(),
  profile: {reduce:30, offline:2},
  progress: [35,42,28,50,46,31,40] // datos demo para la línea
};
const cats = ["Social","Video","Mensajería","Noticias","Juegos","Compras","Trabajo/Estudio","Otros"];

/* ====== Helpers ====== */
const $  = sel => document.querySelector(sel);
const $$ = sel => [...document.querySelectorAll(sel)];
function toast(msg){ console.log(msg); } // simple logger

/* ====== Diagnóstico ====== */
function calcScore(){
  let sum=0, max=0;
  $$(".q").forEach(r=>{
    const w = Number(r.dataset.weight||1);
    sum += Number(r.value||0)*w;
    max += 5*w;
  });
  const pct = Math.round((sum/max)*100);
  $("#score").textContent = isFinite(pct)? pct : 0;
  $("#scoreBar").style.width = (isFinite(pct)?pct:0) + "%";
  const t=$("#scoreTag");
  if (pct<35){ t.textContent="saludable"; t.className="tag ok"; }
  else if (pct<65){ t.textContent="riesgo medio"; t.className="tag warn"; }
  else { t.textContent="alto riesgo"; t.className="tag bad"; }
}
$$(".q").forEach(i=>i.addEventListener("input",calcScore));

/* ====== Triggers y perfil ====== */
$("#triggers").addEventListener("click",e=>{
  if(!e.target.classList.contains("chip")) return;
  const v=e.target.dataset.v;
  if(S.triggers.has(v)){ S.triggers.delete(v); e.target.style.outline=""; }
  else { S.triggers.add(v); e.target.style.outline="2px solid var(--brand)"; }
});
$("#saveProfile").onclick=()=>{
  S.profile.reduce = Number($("#goalReduce").value||30);
  S.profile.offline = Number($("#goalOffline").value||2);
  toast("Preferencias guardadas");
};

/* ====== Apps ====== */
function drawApps(){
  const tb = $("#appsTable tbody"); tb.innerHTML="";
  S.apps.forEach((a,i)=>{
    const tr=document.createElement("tr");
    tr.innerHTML = `
      <td><input class="input appName" value="${a.name}"></td>
      <td><select class="input appCat">${cats.map(c=>`<option ${c===a.cat?"selected":""}>${c}</option>`).join("")}</select></td>
      <td><input class="input appMins" type="number" min="0" max="600" value="${a.mins}"></td>
      <td><button class="btn alt del">✖</button></td>`;
    tr.querySelector(".del").onclick=()=>{S.apps.splice(i,1);drawApps();calcTotals();};
    tr.querySelector(".appName").onchange=e=>{a.name=e.target.value};
    tr.querySelector(".appCat").onchange=e=>{a.cat=e.target.value};
    tr.querySelector(".appMins").onchange=e=>{a.mins=Number(e.target.value||0);calcTotals();};
    tb.appendChild(tr);
  });
}
function guessCat(n){
  const s=n.toLowerCase();
  if(/insta|tiktok|facebook|x |twitter/.test(s)) return "Social";
  if(/youtube|netflix|prime|hbo/.test(s)) return "Video";
  if(/whatsapp|telegram|signal|messages/.test(s)) return "Mensajería";
  if(/news|notic|diario|feed/.test(s)) return "Noticias";
  if(/game|juego|roblox|fortnite|pubg/.test(s)) return "Juegos";
  if(/amazon|mercado|shopping|aliexpress/.test(s)) return "Compras";
  if(/meet|teams|zoom|docs|notion|drive|slack/.test(s)) return "Trabajo/Estudio";
  return "Otros";
}
function addApp(name){
  if(!name) return;
  S.apps.push({name,cat:guessCat(name),mins:30});
  drawApps(); calcTotals();
}
$("#addApp").onclick=()=>{ addApp($("#newApp").value.trim()); $("#newApp").value=""; };
$$(".preset").forEach(b=>b.onclick=()=>addApp(b.textContent));
$("#clearAll").onclick=()=>{ if(confirm("¿Limpiar datos?")){ S.apps=[]; drawApps(); calcTotals(); } };
function calcTotals(){
  const tot = S.apps.reduce((a,b)=>a+(Number(b.mins)||0),0);
  $("#totalMins").textContent = tot;
  const tag=$("#riskTag");
  if(tot<=120){ tag.textContent="bajo"; tag.className="tag ok"; }
  else if(tot<=240){ tag.textContent="medio"; tag.className="tag warn"; }
  else { tag.textContent="alto"; tag.className="tag bad"; }
}

/* ====== Recomendaciones & Plan ====== */
function tactica(title,body){ return {title,body,badge:"recomendado",severity:"ok"} }
function blockCat(cat,horario,tool,swap){
  return {title:`🚫 ${cat}`,badge:"bloqueo",severity:"warn",
          body:`Bloquear ${cat} en <b>${horario}</b>. Herramienta: <b>${tool}</b>. ${swap||""}`,
          actions:["Lista blanca (banco, mapas)","Eliminar app de la pantalla principal"]};
}
function generateRecs(){
  const recs=[];
  const byCat={}; S.apps.forEach(a=>byCat[a.cat]=(byCat[a.cat]||0)+Number(a.mins||0));
  const tot=S.apps.reduce((a,b)=>a+Number(b.mins||0),0);
  const targetTot = Math.max(0, Math.round(tot*(1 - (S.profile.reduce/100))));
  if((byCat["Social"]||0)>60) recs.push(blockCat("Social","09:00-12:00, 14:00-18:00","Freedom/BlockSite","Reemplazo: paseo 10’"));
  if((byCat["Video"]||0)>60) recs.push(blockCat("Video","Todo el día salvo 20:30-21:30","Screen Time / Digital Wellbeing","Lo-Fi + Pomodoro"));
  if((byCat["Mensajería"]||0)>45) recs.push(blockCat("Mensajería","12:30 y 18:30 (30')","Focus mode","Notas offline"));
  if(S.triggers.has("noche"))   recs.push(tactica("Corte nocturno 90’","Cargador fuera del dormitorio + libro físico"));
  if(S.triggers.has("mañana"))  recs.push(tactica("Ventana OFF 60’","Sin pantalla al despertar. Hidratación + journaling 5’"));
  if(S.triggers.has("notifs"))  recs.push(tactica("Resumen de notificaciones","Resúmenes 12:00 y 19:00. Solo VIP en tiempo real"));
  recs.push({title:"📉 Objetivo semanal",badge:"meta",severity:"ok",
             body:`Reducir de <b>${tot}→${targetTot} min/día</b> (${S.profile.reduce}%). Crear <b>${S.profile.offline} h</b> diarias en modo avión.`});
  // Render
  const box=$("#recs"); box.innerHTML="";
  recs.forEach(r=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML = `
      <div class="row" style="justify-content:space-between;align-items:center">
        <div class="h2">${r.title}</div>
        <span class="tag ${r.severity||'ok'}">${r.badge||'recomendado'}</span>
      </div>
      <div class="small" style="margin:6px 0 12px">${r.body||""}</div>
      ${r.actions?`<ul class="small" style="line-height:1.9;margin:0">${r.actions.map(a=>`<li>• ${a}</li>`).join("")}</ul>`:""}
    `;
    box.appendChild(c);
  });
  buildPlan(byCat, tot, targetTot);
  toast("Recomendaciones generadas");
}
$("#genPlan").onclick=generateRecs;

function buildPlan(byCat,tot,targetTot){
  const offline = S.profile.offline;
  const plan=[ // simple plan por días
    {d:"Lunes",     a:`Bloqueo Social 9–12h y 14–18h. OFF ${offline}h.`},
    {d:"Martes",    a:`Video solo 20:30–21:30. OFF ${offline}h.`},
    {d:"Miércoles", a:`Mensajería en 12:30 y 18:30. OFF ${offline}h.`},
    {d:"Jueves",    a:`Deep Work AM (2×50’). OFF ${offline}h.`},
    {d:"Viernes",   a:`Revisión semanal 18:00. OFF ${offline}h.`},
    {d:"Sábado",    a:`Juegos 17–19h. Paseo 30’.`},
    {d:"Domingo",   a:`Sabbath digital 4h.`},
  ];
  const box=$("#plan"); box.innerHTML="";
  plan.forEach(p=>{
    const c=document.createElement("div");
    c.className="card small";
    c.innerHTML=`<b>${p.d}</b><br>${p.a}`;
    box.appendChild(c);
  });
}
$("#printPlan").onclick=()=>window.print();
$("#exportIcs").onclick=()=>{
  const ics = [
    "BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Detox//ES",
    ...["MO","TU","WE","TH","FR"].map((d,i)=>[
      "BEGIN:VEVENT",
      `UID:detox-${i}@app`,
      `SUMMARY:Bloqueo Social/Video (trabajo)`,
      `DTSTART:20250101T090000`,
      `DTEND:20250101T120000`,
      "RRULE:FREQ=WEEKLY;BYDAY=" + d,
      "END:VEVENT"
    ].join("\n")),
    "END:VCALENDAR"
  ].join("\n");
  const blob = new Blob([ics],{type:"text/calendar"});
  const a=document.createElement("a"); a.href=URL.createObjectURL(blob); a.download="plan-detox.ics"; a.click();
};

/* ====== Pomodoro + gráfico ====== */
let pomoTimer=null, left=0, total=0, cycle=0, isWork=true;
function updatePomoStatus(txt){ $("#pomoStatus").textContent = txt; }
$("#pomoStart").onclick=()=>{
  const w=+$("#pomoWork").value||25, b=+$("#pomoBreak").value||5, c=+$("#pomoCycles").value||4;
  if(w<10||w>90||b<3||b>30||c<1||c>8) return alert("Revisá los límites del temporizador.");
  total = w*60; left = total; cycle=1; isWork=true;
  clearInterval(pomoTimer);
  pomoTimer = setInterval(()=>{
    left--;
    if(left<=0){
      if(isWork){ // terminó trabajo → break
        isWork=false; left=b*60; updatePomoStatus(`Descanso iniciado (${Math.ceil(left/60)} min). Ciclo ${cycle}/${c}`);
      }else{       // terminó descanso → siguiente ciclo
        cycle++; if(cycle>c){ clearInterval(pomoTimer); updatePomoStatus("Sesión completa ✅"); return; }
        isWork=true; left=w*60; updatePomoStatus(`Trabajo iniciado (${Math.ceil(left/60)} min). Ciclo ${cycle}/${c}`);
      }
    }else{
      const m=Math.floor(left/60), s=(left%60+"").padStart(2,"0");
      updatePomoStatus(`${isWork?"Trabajo":"Descanso"} · ${m}:${s} · Ciclo ${cycle}/${c}`);
    }
  },1000);
  updatePomoStatus(`Trabajo iniciado (${w} min). Ciclo 1/${c}`);
};
$("#pomoStop").onclick=()=>{ clearInterval(pomoTimer); updatePomoStatus("Detenido."); };

function initChart(){
  const ctx=document.getElementById('trend');
  if(!ctx) return;
  new Chart(ctx,{type:'line',
    data:{labels:["L","M","X","J","V","S","D"],
      datasets:[{label:"Minutos totales",data:S.progress,tension:.35,fill:false}]},
    options:{plugins:{legend:{labels:{color:'#cbd5e1'}}},
      scales:{x:{ticks:{color:'#93a3b8'}},y:{ticks:{color:'#93a3b8'}}}}
  });
}

/* ====== Inicio ====== */
function boot(){
  calcScore();
  drawApps();
  calcTotals();
  initChart();
}
document.addEventListener('DOMContentLoaded', boot);
</script>
</body>
</html>
